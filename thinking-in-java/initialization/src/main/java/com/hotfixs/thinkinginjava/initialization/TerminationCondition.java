package com.hotfixs.thinkinginjava.initialization;/** * 使用finalize去验证是否所有的图书都finalize了. * * @author wang */public class TerminationCondition {    public static void main(String[] args) {        Book novel = new Book(true);        novel.checkIn(); // proper cleanup        new Book(true); // Drop the reference, forget to cleanup        System.gc(); // Force gc & finalization    }}class Book {    boolean checkedOut = false;    Book(boolean checkedOut) {        this.checkedOut = checkedOut;    }    void checkIn() {        checkedOut = false;    }    @Override    @SuppressWarnings("FinalizeDoesntCallSuperFinalize")    protected void finalize() throws Throwable {        if (checkedOut) {            System.out.println("Error: checked out");            // super.finalize();        }        super.finalize();    }}